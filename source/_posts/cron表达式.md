---
title: cron表达式详解
date: 2019-11-04 14:38:00
categories: Docs
tags: Cron
toc: true
---

### 1.一个cron表达式最少有5个空格来分割时间元素，总共有7个元素，分别如下：

① 秒（0-59）
② 分钟（0-59）
③ 小时（0-23）
④ 天（月的第几天）（0-31，但是你需要考虑你月的天数）
⑤ 月（0-11）
⑥ 天（星期几）（1-7 1=SUN 或 SUN，MON，TUE，WED，THU，FRI，SAT）
⑦ 年份（1970-2099）
<!--more--> 
说明：每个元素可以是

* 一个具体的值（如6）
* 一个连续区间（9-12），
* 一个间隔时间（0/5）（表示从0开始每隔5，写到哪个元素就表示间隔的是哪个元素，如果写到了秒，那么表示从0秒开始，每隔5秒执行一次）
* 一个列表（1,3,5）（表示第1,3,5时间执行，也是要根据写到了哪个元素上）
* 通配符（,- * ? / L W #）
  

### 2.完整格式表格说明

序号 | 说明 |  是否必填  | 允许填写的值 |  允许的通配符   
-|-|-|-|-
1	| 秒	| 是	| 0-59	| , - * /
2	| 分	| 是	| 0-59	| , - * /
3	| 时	| 是	| 0-23	| , - * /
4	| 日	| 是	| 1-31	| - * ? / L W
5	| 月	| 是	| 1-12 or JAN-DEC|	, - * /
6	| 周	| 是	| 1-7 or SUN-SAT	| , - * ? / L #
7	| 年	| 否	| empty 或 1970-2099	| , - * /

注意：由于"月份中的日期"和"星期中的日期"这两个元素互斥的,必须要对其中一个设置通配符"?".

### 3.通配符详解

* "*" 字符代表所有可能的值。因此，"*"在子表达式（月）里表示每个月的含义，"*"在子表达式（日）表示每一天，在表达式（周）里表示星期的每一天等等。
* "/" 字符用来指定数值的增量，例如：在子表达式（分钟）里的"0/15"表示从第0分钟开始，每15分钟 ;在子表达式（分钟）里的"3/20"表示从第3分钟开始，每20分钟（它和"3，23，43"）的含义一样，例如在周字段上设置 "MON,WED,FRI" 表示周一，周三和周五触发。
* "?" 字符表示不指定值。使用的场景为不需要关心当前设置这个字段的值，仅被用于（日）和（周）两个子表达式，表示不指定值当2个子表达式其中之一被指定了值以后，为了避免冲突，需要将另一个子表达式的值设为 "?"。
* "L" 字符表示最后的意思，仅被用于（日）和（周）两个子表达式，它是单词 "last" 的缩写。在日字段设置上，表示当月的最后一天(依据当前月份，如果是二月还会依据是否是润年[leap]), 在周字段上表示星期六，相当于"7"或"SAT"。
* "W" 字符表示离指定日期的最近那个工作日(周一至周五). 例如在日字段上设置"15W"，表示离每月15号最近的那个工作日触发。如果15号正好是周六，则找最近的周五(14号)触发, 如果15号是周未，则找最近的下周一(16号)触发.如果15号正好在工作日(周一至周五)，则就在该天触发。如果指定格式为 "1W",它则表示每月1号往后最近的工作日触发。如果1号正是周六，则将在3号下周一触发。(注，"W"前只能设置具体的数字,不允许区间"-")。
* "#" 字符表示每月的第几个周几，例如在周字段上设置"6#3"表示在每月的第三个周六.注意如果指定"#5",正好第五周没有周六，则不会触发该配置(用在母亲节和父亲节再合适不过了) 。

小提示：'L'和 'W'可以一组合使用。如果在日字段上设置"LW",则表示在本月的最后一个工作日触发；周字段的设置，若使用英文字母是不区分大小写的，即MON与mon相同；

### 4.常用实例：

&nbsp;&nbsp;0 0/30 9-17 * * ? ? ? 朝九晚五工作时间内每半小时
&nbsp;&nbsp;0 0 12 ? * WED 表示每个星期三中午12点
&nbsp;&nbsp;0 0 12 * * ? 每天12点触发
&nbsp;&nbsp;0 15 10 ? * * 每天10点15分触发
&nbsp;&nbsp;0 * 10 * * ? 每天10:00-10:59每分钟触发一次
&nbsp;&nbsp;0 0/5 10 * * ? 每天 10:00-10:59每隔5分钟触发
&nbsp;&nbsp;0 0/5 10,15 * * ? 每天10:00-10:59,15:00-15:59(每隔5分触发)
&nbsp;&nbsp;0 0-5 15 * * ? 每天15:00-15:05每分触发
&nbsp;&nbsp;0 10,55 14 ? 3 WED 3月份每周三14:10触发 ,14:55触发
&nbsp;&nbsp;0 15 10 ? * MON-FRI 从周一到周五每天10:15分触发
&nbsp;&nbsp;0 15 10 15 * ? 每月15号10:15分触发
&nbsp;&nbsp;0 15 10 L * ? 每月最后一天的10:15分触发
&nbsp;&nbsp;0 15 10 ? * 6L 每月最后一周的星期五的10:15分触发
&nbsp;&nbsp;0 15 10 ? * 6L 2017-2020 从2017年到2020年每月最后一个星期五的10:15分触发
&nbsp;&nbsp;0 15 10 ? * 6#3 每月的第三周的星期五10:15触发
&nbsp;&nbsp;0 0 12 1/5 * ? 每月的第一天开始每隔5天的12:00触发一次
&nbsp;&nbsp;0 11 11 11 11 ? 每年的11月11号 11点11分触发(光棍节)

作者：AD甜蜜蜜
链接：https://www.jianshu.com/p/6b8341cf3311
